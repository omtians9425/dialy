# 1/6 
## Double dispatch
https://www.infoq.com/jp/articles/DoubleDispatch_0829/#:~:text=%E3%83%80%E3%83%96%E3%83%AB%E3%83%BB%E3%83%87%E3%82%A3%E3%82%B9%E3%83%91%E3%83%83%E3%83%81(Double%20Dispatch),%E3%81%AE%E3%81%93%E3%81%A8%E3%82%92%E6%8C%87%E3%81%97%E3%81%BE%E3%81%99%E3%80%82

[KSP](https://github.com/google/ksp) を触っていて Visitor パターンを思い出した。

例えば[この辺り](https://kotlinlang.org/docs/ksp-overview.html#symbolprocessorprovider-the-entry-point)で、Visitor は [`KSNode#accept`](https://github.com/google/ksp/blob/e518b81c4fb86331869aa918688d66d9fd6589db/api/src/main/kotlin/com/google/devtools/ksp/symbol/KSNode.kt#L26) を自分を引数に渡しつつ呼び出している。

一方、`KSNode` の具象クラスも `accept()` 内で対応する Visitor の method (`visitXxx()`) を自分を渡しつつ呼び出している。[例](https://github.com/google/ksp/blob/8475968a50303890f1bd38c0204d0d9fe43a84f2/compiler-plugin/src/main/kotlin/com/google/devtools/ksp/symbol/impl/kotlin/KSFunctionDeclarationImpl.kt#L118)